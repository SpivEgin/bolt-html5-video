!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.saveData=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e,n={},r=document.querySelectorAll(".loadVideo"),a=document.createDocumentFragment(),i=function(t,e){var n=t.getAttribute(e);return Object.keys(JSON.parse(n))},d=function(t){return t.slice((t.lastIndexOf(".")-1>>>0)+2)},o=function(t,e,n){if(t)for(var r=0;r<e.length;r++)n.classList.add(e[r])},s=function(t,e,n,r){t&&e.setAttribute(n,r)},c=function(t,e){for(var n=0;n<t.length;n++){var r=d(t[n]),i=document.createElement("source");i.src=t[n],i.type="video/"+r,a.appendChild(i)}},u=function(t,e){var n=t.getAttribute("data-tracks"),r=JSON.parse(n),i=Object.keys(r);i.forEach(function(t){var e=document.createElement("track");for(var n in r[t])r[t].hasOwnProperty(n)&&(e.kind=r[t].kind,e.srclang=r[t].srclang,e.label=r[t].label,e.src=r[t].src,r[t]["default"]&&(e["default"]="default"));a.appendChild(e)})},l=function(t,e){var n,r=t.target,d=r.parentNode,l=document.createElement("video"),f=i(r,"data-save"),p=r.getAttribute("data-id"),b=r.getAttribute("data-class"),g=r.getAttribute("data-attribs"),v=r.getAttribute("data-width-height"),h=r.getAttribute("data-poster"),m=r.getAttribute("data-tracks"),A=JSON.parse(b),y=JSON.parse(g),O=JSON.parse(v);s(p,l,"id",p),s(h,l,"poster",h);for(var k=0;k<y.length;k++)s(g,l,y[k],"");if(o(b,A,l),v)for(n in O)O.hasOwnProperty(n)&&l.setAttribute(n,O[n]);c(f,l),m&&u(r,l),l.appendChild(a),d.appendChild(l),r.setAttribute("hidden",""),r.setAttribute("style","display:none"),r.previousElementSibling.setAttribute("hidden","")},f=function(t){l(t)};return n.destroy=function(){e&&(t.document.removeEventListener("click",f,!1),e=null)},n.init=function(t){n.destroy();for(var e=0,a=r.length;e<a;e++)r[e].addEventListener("click",f,!1)},n}),saveData.init();